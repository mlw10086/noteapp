# ğŸ“ Notes App - ç°ä»£åŒ–ä¾¿ç­¾ç®¡ç†ç³»ç»Ÿ

ä¸€ä¸ªåŠŸèƒ½ä¸°å¯Œçš„ç°ä»£åŒ–ä¾¿ç­¾ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒå®æ—¶åä½œã€å¤šç”¨æˆ·ç®¡ç†ã€å®šæ—¶å‘å¸ƒç­‰é«˜çº§åŠŸèƒ½ã€‚åŸºäº Next.js 15 å’Œ React 19 æ„å»ºï¼Œæä¾›ä¼˜ç§€çš„ç”¨æˆ·ä½“éªŒå’Œå¼ºå¤§çš„åŠŸèƒ½ã€‚

![License](https://img.shields.io/badge/license-MIT-blue.svg)
![Next.js](https://img.shields.io/badge/Next.js-15.4.5-black)
![React](https://img.shields.io/badge/React-19.1.0-blue)
![TypeScript](https://img.shields.io/badge/TypeScript-5.x-blue)

## âœ¨ ä¸»è¦åŠŸèƒ½

### ğŸ” ç”¨æˆ·ç³»ç»Ÿ
- **ç”¨æˆ·æ³¨å†Œ/ç™»å½•** - åŸºäº NextAuth.js çš„å®‰å…¨è®¤è¯
- **ç”¨æˆ·èµ„æ–™ç®¡ç†** - å¤´åƒä¸Šä¼ ã€ä¸ªäººä¿¡æ¯ç¼–è¾‘
- **æƒé™æ§åˆ¶** - å¤šçº§æƒé™ç®¡ç†ç³»ç»Ÿ

### ğŸ“‹ ä¾¿ç­¾ç®¡ç†
- **å¯Œæ–‡æœ¬ç¼–è¾‘** - æ”¯æŒ Markdown è¯­æ³•çš„å¼ºå¤§ç¼–è¾‘å™¨
- **ä¾¿ç­¾åˆ†ç±»** - çµæ´»çš„æ ‡ç­¾ç³»ç»Ÿå’Œé¢œè‰²æ ‡è®°
- **å®šæ—¶å‘å¸ƒ** - æ”¯æŒä¾¿ç­¾å®šæ—¶å‘å¸ƒåŠŸèƒ½
- **æ‰¹é‡æ“ä½œ** - æ‰¹é‡åˆ é™¤ã€ç¼–è¾‘ä¾¿ç­¾
- **æœç´¢åŠŸèƒ½** - å…¨æ–‡æœç´¢å’Œæ ‡ç­¾ç­›é€‰

### ğŸ¤ å®æ—¶åä½œ
- **å¤šäººåä½œ** - åŸºäº Socket.IO çš„å®æ—¶åä½œç¼–è¾‘
- **åä½œæƒé™** - é‚€è¯·ç³»ç»Ÿå’Œæƒé™ç®¡ç†
- **å®æ—¶åŒæ­¥** - å…‰æ ‡ä½ç½®ã€ç¼–è¾‘çŠ¶æ€å®æ—¶åŒæ­¥
- **åä½œç›‘æ§** - ç®¡ç†å‘˜å¯ç›‘æ§åä½œä¼šè¯

### ğŸ¨ ç”¨æˆ·ä½“éªŒ
- **å“åº”å¼è®¾è®¡** - å®Œç¾é€‚é…æ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡
- **ä¸»é¢˜åˆ‡æ¢** - æ”¯æŒæ·±è‰²/æµ…è‰²ä¸»é¢˜
- **å¤šè¯­è¨€æ”¯æŒ** - å›½é™…åŒ– (i18n) æ”¯æŒ
- **æ— éšœç¢è®¿é—®** - éµå¾ª WCAG æ ‡å‡†

### ğŸ›  ç®¡ç†åŠŸèƒ½
- **ç®¡ç†å‘˜é¢æ¿** - å®Œæ•´çš„åå°ç®¡ç†ç³»ç»Ÿ
- **ç”¨æˆ·ç®¡ç†** - ç”¨æˆ·çŠ¶æ€æ§åˆ¶ã€æƒé™åˆ†é…
- **ç³»ç»Ÿè®¾ç½®** - å…¨å±€é…ç½®å’ŒåŠŸèƒ½å¼€å…³
- **åä½œæ§åˆ¶** - åä½œåŠŸèƒ½çš„å…¨å±€ç®¡ç†

## ğŸš€ æŠ€æœ¯æ ˆ

### å‰ç«¯æŠ€æœ¯
- **[Next.js 15.4.5](https://nextjs.org/)** - React å…¨æ ˆæ¡†æ¶
- **[React 19.1.0](https://react.dev/)** - ç”¨æˆ·ç•Œé¢åº“
- **[TypeScript](https://www.typescriptlang.org/)** - ç±»å‹å®‰å…¨çš„ JavaScript
- **[Tailwind CSS](https://tailwindcss.com/)** - å®ç”¨ä¼˜å…ˆçš„ CSS æ¡†æ¶
- **[Radix UI](https://www.radix-ui.com/)** - æ— æ ·å¼çš„ UI ç»„ä»¶åº“

### åç«¯æŠ€æœ¯
- **[Prisma](https://www.prisma.io/)** - ç°ä»£æ•°æ®åº“ ORM
- **[PostgreSQL](https://www.postgresql.org/)** - å…³ç³»å‹æ•°æ®åº“
- **[NextAuth.js](https://next-auth.js.org/)** - è®¤è¯è§£å†³æ–¹æ¡ˆ
- **[Socket.IO](https://socket.io/)** - å®æ—¶é€šä¿¡åº“

### å¼€å‘å·¥å…·
- **[ESLint](https://eslint.org/)** - ä»£ç è´¨é‡æ£€æŸ¥
- **[Prettier](https://prettier.io/)** - ä»£ç æ ¼å¼åŒ–
- **[Husky](https://typicode.github.io/husky/)** - Git hooks ç®¡ç†

## ğŸ“¦ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js 18.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- PostgreSQL æ•°æ®åº“
- npm/yarn/pnpm åŒ…ç®¡ç†å™¨

### 1. å…‹éš†é¡¹ç›®

```bash
git clone <your-repository-url>
cd notes-app
```

### 2. å®‰è£…ä¾èµ–

```bash
npm install
# æˆ–
yarn install
# æˆ–
pnpm install
```

### 3. ç¯å¢ƒé…ç½®

å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿å¹¶é…ç½®ï¼š

```bash
cp .env.example .env.local
```

ç¼–è¾‘ `.env.local` æ–‡ä»¶ï¼Œé…ç½®ä»¥ä¸‹å˜é‡ï¼š

```env
# æ•°æ®åº“è¿æ¥
DATABASE_URL="postgresql://username:password@localhost:5432/notes_app"

# NextAuth é…ç½®
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET="your-secret-key-here"

# å…¶ä»–é…ç½®
NODE_ENV="development"
```

### 4. æ•°æ®åº“è®¾ç½®

```bash
# ç”Ÿæˆ Prisma å®¢æˆ·ç«¯
npx prisma generate

# è¿è¡Œæ•°æ®åº“è¿ç§»
npx prisma migrate dev

# (å¯é€‰) å¡«å……ç¤ºä¾‹æ•°æ®
npx prisma db seed
```

### 5. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
# æˆ–
yarn dev
# æˆ–
pnpm dev
```

æ‰“å¼€ [http://localhost:3000](http://localhost:3000) æŸ¥çœ‹åº”ç”¨ã€‚

## ğŸ—„ï¸ æ•°æ®åº“é…ç½®

### PostgreSQL è®¾ç½®

1. **å®‰è£… PostgreSQL**
   ```bash
   # Ubuntu/Debian
   sudo apt-get install postgresql postgresql-contrib

   # macOS (ä½¿ç”¨ Homebrew)
   brew install postgresql

   # Windows
   # ä¸‹è½½å¹¶å®‰è£… PostgreSQL å®˜æ–¹å®‰è£…åŒ…
   ```

2. **åˆ›å»ºæ•°æ®åº“**
   ```bash
   sudo -u postgres psql
   CREATE DATABASE notes_app;
   CREATE USER notes_user WITH PASSWORD 'your_password';
   GRANT ALL PRIVILEGES ON DATABASE notes_app TO notes_user;
   \q
   ```

3. **é…ç½®è¿æ¥å­—ç¬¦ä¸²**
   ```env
   DATABASE_URL="postgresql://notes_user:your_password@localhost:5432/notes_app"
   ```

### æ•°æ®åº“è¿ç§»

```bash
# åˆ›å»ºæ–°è¿ç§»
npx prisma migrate dev --name migration_name

# é‡ç½®æ•°æ®åº“
npx prisma migrate reset

# æŸ¥çœ‹æ•°æ®åº“çŠ¶æ€
npx prisma migrate status
```
## ğŸš€ éƒ¨ç½²æŒ‡å—

æœ¬åº”ç”¨ä½¿ç”¨è‡ªå®šä¹‰æœåŠ¡å™¨æ”¯æŒ Socket.IO å®æ—¶åŠŸèƒ½ï¼Œä»¥ä¸‹æ˜¯å„å¹³å°çš„è¯¦ç»†éƒ¨ç½²æŒ‡å—ã€‚

### ğŸŒŸ Railway éƒ¨ç½²ï¼ˆæ¨èï¼‰

Railway æ˜¯éƒ¨ç½²æ­¤åº”ç”¨çš„æœ€ä½³é€‰æ‹©ï¼Œå®Œç¾æ”¯æŒè‡ªå®šä¹‰æœåŠ¡å™¨å’Œ WebSocketã€‚

#### 1. å‡†å¤‡å·¥ä½œ

ç¡®ä¿ä½ çš„é¡¹ç›®å·²æ¨é€åˆ° GitHub/GitLabã€‚

#### 2. éƒ¨ç½²æ­¥éª¤

1. **è®¿é—® [Railway](https://railway.app/) å¹¶ç™»å½•**

2. **åˆ›å»ºæ–°é¡¹ç›®**
   - ç‚¹å‡» "New Project"
   - é€‰æ‹© "Deploy from GitHub repo"
   - é€‰æ‹©ä½ çš„ notes-app ä»“åº“

3. **é…ç½®ç¯å¢ƒå˜é‡**
   ```env
   DATABASE_URL=postgresql://username:password@host:port/database
   NEXTAUTH_URL=https://your-app-name.railway.app
   NEXTAUTH_SECRET=your-super-secret-key
   NODE_ENV=production
   PORT=3000
   ```

4. **é…ç½®æ„å»ºå‘½ä»¤**
   - Build Command: `npm run build`
   - Start Command: `npm start`

5. **æ•°æ®åº“è®¾ç½®**
   - åœ¨ Railway ä¸­æ·»åŠ  PostgreSQL æœåŠ¡
   - å¤åˆ¶æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²åˆ° `DATABASE_URL`

6. **éƒ¨ç½²å®Œæˆ**
   - Railway ä¼šè‡ªåŠ¨æ„å»ºå’Œéƒ¨ç½²
   - è·å–åˆ†é…çš„åŸŸåè®¿é—®åº”ç”¨

#### Railway é…ç½®æ–‡ä»¶ (railway.toml)

```toml
[build]
builder = "NIXPACKS"

[deploy]
startCommand = "npm start"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

[env]
NODE_ENV = "production"
```

### ğŸ¨ Render éƒ¨ç½²

Render æä¾›å…è´¹å±‚çº§ï¼Œé€‚åˆä¸ªäººé¡¹ç›®å’Œå°å‹åº”ç”¨ã€‚

#### 1. éƒ¨ç½²æ­¥éª¤

1. **è®¿é—® [Render](https://render.com/) å¹¶æ³¨å†Œ**

2. **åˆ›å»º Web Service**
   - è¿æ¥ GitHub ä»“åº“
   - é€‰æ‹© notes-app é¡¹ç›®

3. **é…ç½®æœåŠ¡**
   ```
   Name: notes-app
   Environment: Node
   Build Command: npm install && npm run build
   Start Command: npm start
   ```

4. **ç¯å¢ƒå˜é‡é…ç½®**
   ```env
   DATABASE_URL=your_postgresql_url
   NEXTAUTH_URL=https://your-app-name.onrender.com
   NEXTAUTH_SECRET=your-secret-key
   NODE_ENV=production
   ```

5. **æ•°æ®åº“è®¾ç½®**
   - åˆ›å»º PostgreSQL æ•°æ®åº“æœåŠ¡
   - è·å–è¿æ¥å­—ç¬¦ä¸²

#### Render é…ç½®æ–‡ä»¶ (render.yaml)

```yaml
services:
  - type: web
    name: notes-app
    env: node
    buildCommand: npm install && npm run build
    startCommand: npm start
    envVars:
      - key: NODE_ENV
        value: production
      - key: DATABASE_URL
        fromDatabase:
          name: notes-db
          property: connectionString
      - key: NEXTAUTH_URL
        value: https://your-app-name.onrender.com
      - key: NEXTAUTH_SECRET
        generateValue: true

databases:
  - name: notes-db
    databaseName: notes_app
    user: notes_user
```

### ğŸ”´ Heroku éƒ¨ç½²

Heroku æ˜¯ç»å…¸çš„éƒ¨ç½²å¹³å°ï¼Œä½†éœ€è¦ä»˜è´¹è®¡åˆ’ã€‚

#### 1. å®‰è£… Heroku CLI

```bash
# macOS
brew tap heroku/brew && brew install heroku

# Ubuntu/Debian
curl https://cli-assets.heroku.com/install.sh | sh

# Windows
# ä¸‹è½½å¹¶å®‰è£… Heroku CLI
```

#### 2. éƒ¨ç½²æ­¥éª¤

```bash
# ç™»å½• Heroku
heroku login

# åˆ›å»ºåº”ç”¨
heroku create your-app-name

# æ·»åŠ  PostgreSQL æ’ä»¶
heroku addons:create heroku-postgresql:mini

# è®¾ç½®ç¯å¢ƒå˜é‡
heroku config:set NEXTAUTH_SECRET=your-secret-key
heroku config:set NODE_ENV=production
heroku config:set NEXTAUTH_URL=https://your-app-name.herokuapp.com

# éƒ¨ç½²
git push heroku main

# è¿è¡Œæ•°æ®åº“è¿ç§»
heroku run npx prisma migrate deploy
```

#### Heroku é…ç½®æ–‡ä»¶

**Procfile:**
```
web: npm start
```

**package.json è„šæœ¬æ›´æ–°:**
```json
{
  "scripts": {
    "dev": "node server.js",
    "build": "next build",
    "start": "NODE_ENV=production node server.js",
    "heroku-postbuild": "npm run build"
  }
}
```
### ğŸ–¥ï¸ VPS éƒ¨ç½²ï¼ˆUbuntu/CentOSï¼‰

VPS éƒ¨ç½²æä¾›æœ€å¤§çš„çµæ´»æ€§å’Œæ§åˆ¶æƒã€‚

#### 1. æœåŠ¡å™¨å‡†å¤‡

```bash
# æ›´æ–°ç³»ç»Ÿ
sudo apt update && sudo apt upgrade -y

# å®‰è£… Node.js 18+
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs

# å®‰è£… PM2
sudo npm install -g pm2

# å®‰è£… PostgreSQL
sudo apt install postgresql postgresql-contrib
```

#### 2. æ•°æ®åº“è®¾ç½®

```bash
# åˆ‡æ¢åˆ° postgres ç”¨æˆ·
sudo -u postgres psql

# åˆ›å»ºæ•°æ®åº“å’Œç”¨æˆ·
CREATE DATABASE notes_app;
CREATE USER notes_user WITH PASSWORD 'secure_password';
GRANT ALL PRIVILEGES ON DATABASE notes_app TO notes_user;
\q
```

#### 3. åº”ç”¨éƒ¨ç½²

```bash
# å…‹éš†é¡¹ç›®
git clone <your-repo-url>
cd notes-app

# å®‰è£…ä¾èµ–
npm install

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env.production
# ç¼–è¾‘ .env.production æ–‡ä»¶

# æ„å»ºåº”ç”¨
npm run build

# è¿è¡Œæ•°æ®åº“è¿ç§»
npx prisma migrate deploy

# ä½¿ç”¨ PM2 å¯åŠ¨
pm2 start ecosystem.config.js
pm2 save
pm2 startup
```

#### PM2 é…ç½®æ–‡ä»¶ (ecosystem.config.js)

```javascript
module.exports = {
  apps: [{
    name: 'notes-app',
    script: 'server.js',
    instances: 'max',
    exec_mode: 'cluster',
    env: {
      NODE_ENV: 'development'
    },
    env_production: {
      NODE_ENV: 'production',
      PORT: 3000
    }
  }]
}
```

#### 4. Nginx åå‘ä»£ç†

```bash
# å®‰è£… Nginx
sudo apt install nginx

# åˆ›å»ºé…ç½®æ–‡ä»¶
sudo nano /etc/nginx/sites-available/notes-app
```

**Nginx é…ç½®:**
```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}
```

```bash
# å¯ç”¨ç«™ç‚¹
sudo ln -s /etc/nginx/sites-available/notes-app /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl restart nginx
```

#### 5. SSL è¯ä¹¦ (Let's Encrypt)

```bash
# å®‰è£… Certbot
sudo apt install certbot python3-certbot-nginx

# è·å– SSL è¯ä¹¦
sudo certbot --nginx -d your-domain.com

# è‡ªåŠ¨ç»­æœŸ
sudo crontab -e
# æ·»åŠ : 0 12 * * * /usr/bin/certbot renew --quiet
```

### âš¡ Vercel éƒ¨ç½²ï¼ˆéœ€è¦ç‰¹æ®Šé…ç½®ï¼‰

ç”±äºæœ¬åº”ç”¨ä½¿ç”¨è‡ªå®šä¹‰æœåŠ¡å™¨å’Œ Socket.IOï¼Œåœ¨ Vercel ä¸Šéƒ¨ç½²éœ€è¦ç‰¹æ®Šå¤„ç†ã€‚

#### æ–¹æ¡ˆä¸€ï¼šåˆ†ç¦»æ¶æ„ï¼ˆæ¨èï¼‰

å°†å‰ç«¯å’Œåç«¯åˆ†ç¦»éƒ¨ç½²ï¼š

1. **å‰ç«¯éƒ¨ç½²åˆ° Vercel**
   - ç§»é™¤è‡ªå®šä¹‰æœåŠ¡å™¨ä»£ç 
   - é…ç½® API è·¯ç”±æŒ‡å‘åç«¯æœåŠ¡å™¨
   - ç¦ç”¨ Socket.IO ç›¸å…³åŠŸèƒ½æˆ–ä½¿ç”¨å¤–éƒ¨æœåŠ¡

2. **åç«¯éƒ¨ç½²åˆ°å…¶ä»–å¹³å°**
   - ä½¿ç”¨ Railway/Render éƒ¨ç½² Socket.IO æœåŠ¡å™¨
   - é…ç½® CORS å…è®¸ Vercel åŸŸåè®¿é—®

#### æ–¹æ¡ˆäºŒï¼šä½¿ç”¨ Vercel Functions

```javascript
// api/socket.js
import { Server } from 'socket.io'

export default function handler(req, res) {
  if (res.socket.server.io) {
    console.log('Socket is already running')
  } else {
    console.log('Socket is initializing')
    const io = new Server(res.socket.server)
    res.socket.server.io = io

    io.on('connection', socket => {
      // Socket.IO é€»è¾‘
    })
  }
  res.end()
}
```

**æ³¨æ„ï¼š** Vercel çš„ Serverless Functions æœ‰æ—¶é—´é™åˆ¶ï¼Œä¸é€‚åˆé•¿è¿æ¥ã€‚

### ğŸ³ Docker éƒ¨ç½²

ä½¿ç”¨ Docker å®¹å™¨åŒ–éƒ¨ç½²ï¼Œé€‚ç”¨äºä»»ä½•æ”¯æŒ Docker çš„å¹³å°ã€‚

#### 1. åˆ›å»º Dockerfile

```dockerfile
FROM node:18-alpine AS base

# Install dependencies only when needed
FROM base AS deps
RUN apk add --no-cache libc6-compat
WORKDIR /app

# Install dependencies based on the preferred package manager
COPY package.json yarn.lock* package-lock.json* pnpm-lock.yaml* ./
RUN \
  if [ -f yarn.lock ]; then yarn --frozen-lockfile; \
  elif [ -f package-lock.json ]; then npm ci; \
  elif [ -f pnpm-lock.yaml ]; then yarn global add pnpm && pnpm i --frozen-lockfile; \
  else echo "Lockfile not found." && exit 1; \
  fi

# Rebuild the source code only when needed
FROM base AS builder
WORKDIR /app
COPY --from=deps /app/node_modules ./node_modules
COPY . .

# Generate Prisma client
RUN npx prisma generate

# Build the application
RUN npm run build

# Production image, copy all the files and run next
FROM base AS runner
WORKDIR /app

ENV NODE_ENV production

RUN addgroup --system --gid 1001 nodejs
RUN adduser --system --uid 1001 nextjs

COPY --from=builder /app/public ./public
COPY --from=builder /app/.next/standalone ./
COPY --from=builder /app/.next/static ./.next/static
COPY --from=builder /app/prisma ./prisma
COPY --from=builder /app/node_modules/.prisma ./node_modules/.prisma

USER nextjs

EXPOSE 3000

ENV PORT 3000
ENV HOSTNAME "0.0.0.0"

CMD ["node", "server.js"]
```

#### 2. åˆ›å»º docker-compose.yml

```yaml
version: '3.8'

services:
  app:
    build: .
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=production
      - DATABASE_URL=postgresql://notes_user:password@db:5432/notes_app
      - NEXTAUTH_URL=http://localhost:3000
      - NEXTAUTH_SECRET=your-secret-key
    depends_on:
      - db
    volumes:
      - ./uploads:/app/uploads

  db:
    image: postgres:15
    environment:
      - POSTGRES_DB=notes_app
      - POSTGRES_USER=notes_user
      - POSTGRES_PASSWORD=password
    volumes:
      - postgres_data:/var/lib/postgresql/data
    ports:
      - "5432:5432"

volumes:
  postgres_data:
```

#### 3. éƒ¨ç½²å‘½ä»¤

```bash
# æ„å»ºå’Œå¯åŠ¨
docker-compose up -d

# è¿è¡Œæ•°æ®åº“è¿ç§»
docker-compose exec app npx prisma migrate deploy

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f app
```
## ğŸ”§ ç¯å¢ƒå˜é‡é…ç½®

åˆ›å»º `.env.local` æ–‡ä»¶å¹¶é…ç½®ä»¥ä¸‹å˜é‡ï¼š

```env
# æ•°æ®åº“é…ç½®
DATABASE_URL="postgresql://username:password@localhost:5432/notes_app"

# NextAuth é…ç½®
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET="your-super-secret-key-here-min-32-chars"

# åº”ç”¨é…ç½®
NODE_ENV="development"
PORT=3000

# å¯é€‰ï¼šæ–‡ä»¶ä¸Šä¼ é…ç½®
UPLOAD_DIR="./uploads"
MAX_FILE_SIZE="5242880" # 5MB

# å¯é€‰ï¼šé‚®ä»¶é…ç½®ï¼ˆç”¨äºé€šçŸ¥ï¼‰
SMTP_HOST="smtp.gmail.com"
SMTP_PORT="587"
SMTP_USER="your-email@gmail.com"
SMTP_PASS="your-app-password"

# å¯é€‰ï¼šRedis é…ç½®ï¼ˆç”¨äºä¼šè¯å­˜å‚¨ï¼‰
REDIS_URL="redis://localhost:6379"
```

### ç”Ÿäº§ç¯å¢ƒå˜é‡

```env
# ç”Ÿäº§æ•°æ®åº“
DATABASE_URL="postgresql://user:pass@host:5432/dbname?sslmode=require"

# ç”Ÿäº§åŸŸå
NEXTAUTH_URL="https://your-domain.com"

# å¼ºå¯†é’¥ï¼ˆç”Ÿäº§ç¯å¢ƒå¿…é¡»ï¼‰
NEXTAUTH_SECRET="your-production-secret-key-min-32-characters"

# ç”Ÿäº§ç¯å¢ƒ
NODE_ENV="production"
```

## ğŸ“‹ ç”Ÿäº§ç¯å¢ƒæ£€æŸ¥æ¸…å•

### ğŸ”’ å®‰å…¨é…ç½®

- [ ] è®¾ç½®å¼ºå¯†ç çš„ `NEXTAUTH_SECRET`
- [ ] é…ç½® HTTPSï¼ˆSSL è¯ä¹¦ï¼‰
- [ ] å¯ç”¨æ•°æ®åº“ SSL è¿æ¥
- [ ] é…ç½® CORS ç­–ç•¥
- [ ] è®¾ç½®å®‰å…¨å¤´éƒ¨ï¼ˆCSPã€HSTS ç­‰ï¼‰
- [ ] å®šæœŸæ›´æ–°ä¾èµ–åŒ…

### ğŸš€ æ€§èƒ½ä¼˜åŒ–

- [ ] å¯ç”¨æ•°æ®åº“è¿æ¥æ± 
- [ ] é…ç½® CDNï¼ˆé™æ€èµ„æºï¼‰
- [ ] å¯ç”¨ Gzip å‹ç¼©
- [ ] é…ç½®ç¼“å­˜ç­–ç•¥
- [ ] ç›‘æ§åº”ç”¨æ€§èƒ½
- [ ] è®¾ç½®æ—¥å¿—è®°å½•

### ğŸ”„ å¤‡ä»½å’Œç›‘æ§

- [ ] é…ç½®æ•°æ®åº“è‡ªåŠ¨å¤‡ä»½
- [ ] è®¾ç½®åº”ç”¨ç›‘æ§ï¼ˆUptimeï¼‰
- [ ] é…ç½®é”™è¯¯æ—¥å¿—æ”¶é›†
- [ ] è®¾ç½®æ€§èƒ½ç›‘æ§
- [ ] å‡†å¤‡ç¾éš¾æ¢å¤è®¡åˆ’

## ğŸ› ï¸ å¼€å‘å·¥å…·

### æ•°æ®åº“ç®¡ç†

```bash
# æŸ¥çœ‹æ•°æ®åº“çŠ¶æ€
npx prisma studio

# é‡ç½®æ•°æ®åº“
npx prisma migrate reset

# ç”Ÿæˆæ–°è¿ç§»
npx prisma migrate dev --name your_migration_name

# éƒ¨ç½²è¿ç§»åˆ°ç”Ÿäº§ç¯å¢ƒ
npx prisma migrate deploy
```

### ä»£ç è´¨é‡

```bash
# è¿è¡Œ ESLint
npm run lint

# ä¿®å¤ ESLint é”™è¯¯
npm run lint:fix

# è¿è¡Œç±»å‹æ£€æŸ¥
npx tsc --noEmit

# æ ¼å¼åŒ–ä»£ç 
npx prettier --write .
```

### æµ‹è¯•

```bash
# è¿è¡Œå•å…ƒæµ‹è¯•
npm run test

# è¿è¡Œç«¯åˆ°ç«¯æµ‹è¯•
npm run test:e2e

# ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage
```

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. æ•°æ®åº“è¿æ¥å¤±è´¥

**é”™è¯¯ä¿¡æ¯ï¼š** `Error: P1001: Can't reach database server`

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ£€æŸ¥æ•°æ®åº“æ˜¯å¦è¿è¡Œ
sudo systemctl status postgresql

# æ£€æŸ¥è¿æ¥å­—ç¬¦ä¸²æ ¼å¼
DATABASE_URL="postgresql://user:password@host:port/database"

# æµ‹è¯•è¿æ¥
npx prisma db pull
```

#### 2. Socket.IO è¿æ¥é—®é¢˜

**é”™è¯¯ä¿¡æ¯ï¼š** `WebSocket connection failed`

**è§£å†³æ–¹æ¡ˆï¼š**
```javascript
// æ£€æŸ¥æœåŠ¡å™¨é…ç½®
const io = new Server(httpServer, {
  cors: {
    origin: process.env.NEXTAUTH_URL,
    methods: ["GET", "POST"]
  }
})
```

#### 3. NextAuth ä¼šè¯é—®é¢˜

**é”™è¯¯ä¿¡æ¯ï¼š** `[next-auth][error][JWT_SESSION_ERROR]`

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# ç¡®ä¿ NEXTAUTH_SECRET å·²è®¾ç½®
echo $NEXTAUTH_SECRET

# æ¸…é™¤æµè§ˆå™¨ cookies
# é‡æ–°ç”Ÿæˆ secret
openssl rand -base64 32
```

#### 4. æ„å»ºå¤±è´¥

**é”™è¯¯ä¿¡æ¯ï¼š** `Module not found` æˆ– `Type errors`

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ¸…é™¤ç¼“å­˜
rm -rf .next node_modules
npm install

# é‡æ–°ç”Ÿæˆ Prisma å®¢æˆ·ç«¯
npx prisma generate

# æ£€æŸ¥ TypeScript é”™è¯¯
npx tsc --noEmit
```

#### 5. éƒ¨ç½²å 404 é”™è¯¯

**å¯èƒ½åŸå› ï¼š**
- é™æ€æ–‡ä»¶è·¯å¾„é”™è¯¯
- æœåŠ¡å™¨è·¯ç”±é…ç½®é—®é¢˜
- ç¯å¢ƒå˜é‡æœªæ­£ç¡®è®¾ç½®

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ£€æŸ¥æ„å»ºè¾“å‡º
npm run build

# éªŒè¯ç¯å¢ƒå˜é‡
printenv | grep NEXTAUTH

# æ£€æŸ¥æœåŠ¡å™¨æ—¥å¿—
pm2 logs notes-app
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼

### å¦‚ä½•è´¡çŒ®

1. **Fork é¡¹ç›®**
2. **åˆ›å»ºåŠŸèƒ½åˆ†æ”¯** (`git checkout -b feature/AmazingFeature`)
3. **æäº¤æ›´æ”¹** (`git commit -m 'Add some AmazingFeature'`)
4. **æ¨é€åˆ°åˆ†æ”¯** (`git push origin feature/AmazingFeature`)
5. **åˆ›å»º Pull Request**

### å¼€å‘è§„èŒƒ

- éµå¾ªç°æœ‰çš„ä»£ç é£æ ¼
- æ·»åŠ é€‚å½“çš„æµ‹è¯•
- æ›´æ–°ç›¸å…³æ–‡æ¡£
- ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

- [Next.js](https://nextjs.org/) - React å…¨æ ˆæ¡†æ¶
- [Prisma](https://www.prisma.io/) - ç°ä»£æ•°æ®åº“å·¥å…·
- [Socket.IO](https://socket.io/) - å®æ—¶é€šä¿¡åº“
- [Tailwind CSS](https://tailwindcss.com/) - CSS æ¡†æ¶
- [Radix UI](https://www.radix-ui.com/) - UI ç»„ä»¶åº“

## ğŸ“ æ”¯æŒ

å¦‚æœä½ é‡åˆ°ä»»ä½•é—®é¢˜æˆ–æœ‰ç–‘é—®ï¼Œè¯·ï¼š

1. æŸ¥çœ‹ [æ•…éšœæ’é™¤](#-æ•…éšœæ’é™¤) éƒ¨åˆ†
2. æœç´¢ç°æœ‰çš„ [Issues](https://github.com/your-username/notes-app/issues)
3. åˆ›å»ºæ–°çš„ Issue æè¿°ä½ çš„é—®é¢˜
4. åŠ å…¥æˆ‘ä»¬çš„ç¤¾åŒºè®¨è®º

## ğŸ”„ æ›´æ–°æ—¥å¿—

### v1.0.0 (2024-01-XX)
- âœ¨ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- ğŸ” ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- ğŸ“ ä¾¿ç­¾ CRUD åŠŸèƒ½
- ğŸ¤ å®æ—¶åä½œåŠŸèƒ½
- ğŸ¨ ä¸»é¢˜åˆ‡æ¢æ”¯æŒ
- ğŸŒ å¤šè¯­è¨€æ”¯æŒ

---

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™å®ƒä¸€ä¸ªæ˜Ÿæ ‡ï¼**

**ğŸš€ Happy Coding!**

#### 2. éƒ¨ç½²æ­¥éª¤

1. **è®¿é—® [Railway](https://railway.app/) å¹¶ç™»å½•**

2. **åˆ›å»ºæ–°é¡¹ç›®**
   - ç‚¹å‡» "New Project"
   - é€‰æ‹© "Deploy from GitHub repo"
   - é€‰æ‹©ä½ çš„ notes-app ä»“åº“

3. **é…ç½®ç¯å¢ƒå˜é‡**
   ```env
   DATABASE_URL=postgresql://username:password@host:port/database
   NEXTAUTH_URL=https://your-app-name.railway.app
   NEXTAUTH_SECRET=your-super-secret-key
   NODE_ENV=production
   PORT=3000
   ```

4. **é…ç½®æ„å»ºå‘½ä»¤**
   - Build Command: `npm run build`
   - Start Command: `npm start`

5. **æ•°æ®åº“è®¾ç½®**
   - åœ¨ Railway ä¸­æ·»åŠ  PostgreSQL æœåŠ¡
   - å¤åˆ¶æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²åˆ° `DATABASE_URL`

6. **éƒ¨ç½²å®Œæˆ**
   - Railway ä¼šè‡ªåŠ¨æ„å»ºå’Œéƒ¨ç½²
   - è·å–åˆ†é…çš„åŸŸåè®¿é—®åº”ç”¨

#### Railway é…ç½®æ–‡ä»¶ (railway.toml)

```toml
[build]
builder = "NIXPACKS"

[deploy]
startCommand = "npm start"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

[env]
NODE_ENV = "production"
```

### ğŸ¨ Render éƒ¨ç½²

Render æä¾›å…è´¹å±‚çº§ï¼Œé€‚åˆä¸ªäººé¡¹ç›®å’Œå°å‹åº”ç”¨ã€‚

#### 1. éƒ¨ç½²æ­¥éª¤

1. **è®¿é—® [Render](https://render.com/) å¹¶æ³¨å†Œ**

2. **åˆ›å»º Web Service**
   - è¿æ¥ GitHub ä»“åº“
   - é€‰æ‹© notes-app é¡¹ç›®

3. **é…ç½®æœåŠ¡**
   ```
   Name: notes-app
   Environment: Node
   Build Command: npm install && npm run build
   Start Command: npm start
   ```

4. **ç¯å¢ƒå˜é‡é…ç½®**
   ```env
   DATABASE_URL=your_postgresql_url
   NEXTAUTH_URL=https://your-app-name.onrender.com
   NEXTAUTH_SECRET=your-secret-key
   NODE_ENV=production
   ```

5. **æ•°æ®åº“è®¾ç½®**
   - åˆ›å»º PostgreSQL æ•°æ®åº“æœåŠ¡
   - è·å–è¿æ¥å­—ç¬¦ä¸²

#### Render é…ç½®æ–‡ä»¶ (render.yaml)

```yaml
services:
  - type: web
    name: notes-app
    env: node
    buildCommand: npm install && npm run build
    startCommand: npm start
    envVars:
      - key: NODE_ENV
        value: production
      - key: DATABASE_URL
        fromDatabase:
          name: notes-db
          property: connectionString
      - key: NEXTAUTH_URL
        value: https://your-app-name.onrender.com
      - key: NEXTAUTH_SECRET
        generateValue: true

databases:
  - name: notes-db
    databaseName: notes_app
    user: notes_user
```

### ğŸ”´ Heroku éƒ¨ç½²

Heroku æ˜¯ç»å…¸çš„éƒ¨ç½²å¹³å°ï¼Œä½†éœ€è¦ä»˜è´¹è®¡åˆ’ã€‚

#### 1. å®‰è£… Heroku CLI

```bash
# macOS
brew tap heroku/brew && brew install heroku

# Ubuntu/Debian
curl https://cli-assets.heroku.com/install.sh | sh

# Windows
# ä¸‹è½½å¹¶å®‰è£… Heroku CLI
```

#### 2. éƒ¨ç½²æ­¥éª¤

```bash
# ç™»å½• Heroku
heroku login

# åˆ›å»ºåº”ç”¨
heroku create your-app-name

# æ·»åŠ  PostgreSQL æ’ä»¶
heroku addons:create heroku-postgresql:mini

# è®¾ç½®ç¯å¢ƒå˜é‡
heroku config:set NEXTAUTH_SECRET=your-secret-key
heroku config:set NODE_ENV=production
heroku config:set NEXTAUTH_URL=https://your-app-name.herokuapp.com

# éƒ¨ç½²
git push heroku main

# è¿è¡Œæ•°æ®åº“è¿ç§»
heroku run npx prisma migrate deploy
```

#### Heroku é…ç½®æ–‡ä»¶

**Procfile:**
```
web: npm start
```

**package.json è„šæœ¬æ›´æ–°:**
```json
{
  "scripts": {
    "dev": "node server.js",
    "build": "next build",
    "start": "NODE_ENV=production node server.js",
    "heroku-postbuild": "npm run build"
  }
}
```

### ğŸ–¥ï¸ VPS éƒ¨ç½²ï¼ˆUbuntu/CentOSï¼‰

VPS éƒ¨ç½²æä¾›æœ€å¤§çš„çµæ´»æ€§å’Œæ§åˆ¶æƒã€‚

#### 1. æœåŠ¡å™¨å‡†å¤‡

```bash
# æ›´æ–°ç³»ç»Ÿ
sudo apt update && sudo apt upgrade -y

# å®‰è£… Node.js 18+
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs

# å®‰è£… PM2
sudo npm install -g pm2

# å®‰è£… PostgreSQL
sudo apt install postgresql postgresql-contrib
```

#### 2. æ•°æ®åº“è®¾ç½®

```bash
# åˆ‡æ¢åˆ° postgres ç”¨æˆ·
sudo -u postgres psql

# åˆ›å»ºæ•°æ®åº“å’Œç”¨æˆ·
CREATE DATABASE notes_app;
CREATE USER notes_user WITH PASSWORD 'secure_password';
GRANT ALL PRIVILEGES ON DATABASE notes_app TO notes_user;
\q
```

#### 3. åº”ç”¨éƒ¨ç½²

```bash
# å…‹éš†é¡¹ç›®
git clone <your-repo-url>
cd notes-app

# å®‰è£…ä¾èµ–
npm install

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env.production
# ç¼–è¾‘ .env.production æ–‡ä»¶

# æ„å»ºåº”ç”¨
npm run build

# è¿è¡Œæ•°æ®åº“è¿ç§»
npx prisma migrate deploy

# ä½¿ç”¨ PM2 å¯åŠ¨
pm2 start ecosystem.config.js
pm2 save
pm2 startup
```

#### PM2 é…ç½®æ–‡ä»¶ (ecosystem.config.js)

```javascript
module.exports = {
  apps: [{
    name: 'notes-app',
    script: 'server.js',
    instances: 'max',
    exec_mode: 'cluster',
    env: {
      NODE_ENV: 'development'
    },
    env_production: {
      NODE_ENV: 'production',
      PORT: 3000
    }
  }]
}
```

#### 4. Nginx åå‘ä»£ç†

```bash
# å®‰è£… Nginx
sudo apt install nginx

# åˆ›å»ºé…ç½®æ–‡ä»¶
sudo nano /etc/nginx/sites-available/notes-app
```

**Nginx é…ç½®:**
```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}
```

```bash
# å¯ç”¨ç«™ç‚¹
sudo ln -s /etc/nginx/sites-available/notes-app /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl restart nginx
```

#### 5. SSL è¯ä¹¦ (Let's Encrypt)

```bash
# å®‰è£… Certbot
sudo apt install certbot python3-certbot-nginx

# è·å– SSL è¯ä¹¦
sudo certbot --nginx -d your-domain.com

# è‡ªåŠ¨ç»­æœŸ
sudo crontab -e
# æ·»åŠ : 0 12 * * * /usr/bin/certbot renew --quiet
```
